<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Feedback Box</title>
        <link
            href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
            rel="stylesheet"
        />
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
            rel="stylesheet"
        />
        <style>
            :root {
                --primary-color: #2563eb;
                --primary-light: #e0edff;
                --bg-light: #f3f4f6;
                --text-dark: #1e293b;
                --text-subtle: #64748b;
            }

            body {
                background-color: var(--bg-light);
                color: var(--text-dark);
            }

            .fade-in {
                animation: fadeIn 0.5s ease-out;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .emotion-btn {
                width: 60px;
                height: 60px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 50%;
                background: #e2e8f0;
                transition: all 0.3s ease;
                font-size: 2rem;
                cursor: pointer;
                border: 3px solid transparent;
            }

            .emotion-btn:hover {
                transform: scale(1.1);
                background: #cbd5e1;
            }

            .emotion-btn.selected {
                border-color: var(--primary-color);
                background: var(--primary-light);
                transform: scale(1.1);
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            }

            .loading-spinner {
                border: 3px solid #e2e8f0;
                border-radius: 50%;
                border-top: 3px solid var(--primary-color);
                width: 24px;
                height: 24px;
                animation: spin 1s linear infinite;
                display: inline-block;
                vertical-align: middle;
                margin-right: 8px;
            }

            @keyframes spin {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }

            @media (max-width: 640px) {
                .emotion-btn {
                    width: 50px;
                    height: 50px;
                    font-size: 1.5rem;
                }
                .container {
                    padding-left: 1rem;
                    padding-right: 1rem;
                }
            }
        </style>
    </head>
    <body class="min-h-screen text-gray-800">
        <div class="container mx-auto px-4 py-8 max-w-4xl">
            <!-- í—¤ë” ì„¹ì…˜ -->
            <header class="text-center mb-12 fade-in">
                <h1 class="text-4xl font-bold text-gray-800 mb-4">
                    <i class="fas fa-comments text-blue-600 mr-2"></i>
                    Feedback Box
                </h1>
                <p class="text-lg text-gray-600">
                    ì¡°ì§ ê°œì„ ì„ ìœ„í•œ ìµëª… í”¼ë“œë°± ìˆ˜ì§‘ í”Œë«í¼ì…ë‹ˆë‹¤.
                </p>
            </header>

            <!-- ì„¤ëª… ì„¹ì…˜ -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-8 fade-in">
                <div class="flex items-center justify-center space-x-4">
                    <i class="fas fa-shield-alt text-3xl text-blue-600"></i>
                    <div>
                        <h2 class="text-xl font-semibold text-gray-800 mb-2">
                            ì•ˆì „í•œ ìµëª… í”¼ë“œë°±!
                        </h2>
                        <p class="text-gray-600">
                            ëª¨ë“  ì‘ë‹µì€ ìµëª…ì´ë©° ì „ëµê¸°íšì‹¤ì—ì„œë§Œ ì—´ëŒí•©ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
            </div>

            <!-- ëœë¤ ë©”ì‹œì§€ -->
            <div
                id="random-message"
                class="text-center text-gray-600 italic mb-8 fade-in"
            ></div>

            <!-- í”¼ë“œë°± í¼ -->
            <form id="feedback-form" class="space-y-6">
                <!-- ê°ì •ë°” -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-8 fade-in">
                    <label class="block text-gray-700 mb-4 text-lg"
                        >ì „ë°˜ì ì¸ ëŠë‚Œì„ ì„ íƒí•´ì£¼ì„¸ìš”</label
                    >
                    <div class="flex justify-center space-x-6 sm:space-x-8">
                        <button
                            type="button"
                            class="emotion-btn"
                            data-emotion="angry"
                        >
                            ğŸ˜¡
                        </button>
                        <button
                            type="button"
                            class="emotion-btn"
                            data-emotion="neutral"
                        >
                            ğŸ˜
                        </button>
                        <button
                            type="button"
                            class="emotion-btn"
                            data-emotion="happy"
                        >
                            ğŸ™‚
                        </button>
                        <button
                            type="button"
                            class="emotion-btn"
                            data-emotion="love"
                        >
                            ğŸ˜
                        </button>
                    </div>
                    <input
                        type="hidden"
                        name="emotion"
                        id="selected-emotion"
                        required
                    />
                </div>

                <!-- ì§ˆë¬¸ ì¹´ë“œë“¤ -->
                <div class="space-y-6">
                    <div
                        class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all"
                    >
                        <label class="block text-gray-700 font-medium mb-3"
                            >ìµœê·¼ì— í˜‘ì—…ì´ ì˜ ëë˜ íŒ€ ë˜ëŠ” ë¶€ì„œëŠ”
                            ì–´ë””ì¸ê°€ìš”?</label
                        >
                        <input
                            name="q1"
                            type="text"
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            required
                        />
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all"
                    >
                        <label class="block text-gray-700 font-medium mb-3"
                            >íšŒì‚¬ì— ë°”ë¼ëŠ” ì ì€?</label
                        >
                        <textarea
                            name="q2"
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            rows="3"
                            required
                        ></textarea>
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all"
                    >
                        <label class="block text-gray-700 font-medium mb-3"
                            >í•œ ê°€ì§€ ë°”ê¿€ ìˆ˜ ìˆë‹¤ë©´?</label
                        >
                        <textarea
                            name="q3"
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            rows="2"
                        ></textarea>
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all"
                    >
                        <label class="block text-gray-700 font-medium mb-3"
                            >í•œ ë‹¨ì–´ë¡œ ìš°ë¦¬ íšŒì‚¬ë¥¼ í‘œí˜„í•œë‹¤ë©´?</label
                        >
                        <input
                            name="q4"
                            type="text"
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all"
                    >
                        <label class="block text-gray-700 font-medium mb-3"
                            >ìµœê·¼ ì¢‹ì•˜ë˜ íšŒì‚¬ ê²½í—˜ì€?</label
                        >
                        <textarea
                            name="q5"
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            rows="3"
                        ></textarea>
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all"
                    >
                        <label class="block text-gray-700 font-medium mb-3"
                            >ê°œì„ ì„ ìœ„í•œ ì œì•ˆì´ ìˆë‹¤ë©´ ì ì–´ì£¼ì„¸ìš”</label
                        >
                        <textarea
                            name="q6"
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            rows="4"
                        ></textarea>
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all"
                    >
                        <label class="block text-gray-700 font-medium mb-3"
                            >í•¨ê»˜ ì¼í•˜ê³  ì‹¶ì€ ì‚¬ëŒì˜ íŠ¹ì„±ì€?</label
                        >
                        <textarea
                            name="q7"
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            rows="2"
                        ></textarea>
                    </div>
                </div>

                <!-- ì œì¶œ ë²„íŠ¼ -->
                <div class="text-center">
                    <button
                        type="submit"
                        id="submit-btn"
                        class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transform hover:scale-105 transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                        <span class="loading-spinner hidden"></span>
                        <i class="fas fa-paper-plane mr-2"></i>
                        <span class="button-text">ì œì¶œí•˜ê¸°</span>
                    </button>
                </div>
            </form>

            <!-- ì„±ê³µ ë©”ì‹œì§€ -->
            <div
                id="success-msg"
                class="hidden mt-8 bg-green-100 text-green-700 p-4 rounded-lg text-center font-medium fade-in"
            >
                <i class="fas fa-check-circle mr-2"></i>í”¼ë“œë°±ì´ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤.
                ê°ì‚¬í•©ë‹ˆë‹¤!
            </div>

            <!-- í”¼ë“œë°± ì¹´ìš´í„° -->
            <div class="mt-12 text-center text-gray-600">
                <p>
                    <span id="feedback-count" class="font-bold text-blue-600"
                        >0</span
                    >ê°œì˜ ì†Œì¤‘í•œ í”¼ë“œë°±ì´ ì •ìƒì ìœ¼ë¡œ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.
                </p>
            </div>

            <!-- í‘¸í„° -->
            <footer class="mt-16 text-center text-gray-500 text-sm">
                <p>Â© 2025 ì „ëµê¸°íšì‹¤</p>
            </footer>
        </div>

        <script>
            // ëœë¤ ë©”ì‹œì§€ í‘œì‹œ
            const messages = [
                "ì†”ì§í•˜ê²Œ ì¨ì£¼ì„¸ìš”, ì´ë¦„ì€ ëª°ë¼ìš” ğŸ˜",
                "ì—¬ëŸ¬ë¶„ì˜ ì˜ê²¬ì´ íšŒì‚¬ë¥¼ ë³€í™”ì‹œí‚µë‹ˆë‹¤ ğŸ’ª",
                "ë” ë‚˜ì€ ì¡°ì§ì„ ë§Œë“¤ì–´ê°€ìš” ğŸŒ±",
                "ëª¨ë“  ì˜ê²¬ì€ ì†Œì¤‘í•©ë‹ˆë‹¤ âœ¨",
            ];

            document.getElementById("random-message").textContent =
                messages[Math.floor(Math.random() * messages.length)];

            // ê°ì • ì„ íƒ ì²˜ë¦¬ ê°œì„ 
            document.querySelectorAll(".emotion-btn").forEach((btn) => {
                btn.addEventListener("click", function () {
                    document
                        .querySelectorAll(".emotion-btn")
                        .forEach((b) => b.classList.remove("selected"));
                    this.classList.add("selected");
                    document.getElementById("selected-emotion").value =
                        this.dataset.emotion;
                });
            });

            // í¼ ì œì¶œ ì²˜ë¦¬ ê°œì„ 
            document
                .getElementById("feedback-form")
                .addEventListener("submit", async function (e) {
                    e.preventDefault();

                    const submitBtn = document.getElementById("submit-btn");
                    const spinner = submitBtn.querySelector(".loading-spinner");
                    const buttonText = submitBtn.querySelector(".button-text");

                    // ì œì¶œ ì „ ìœ íš¨ì„± ê²€ì‚¬
                    const emotion =
                        document.getElementById("selected-emotion").value;
                    if (!emotion) {
                        alert("ê°ì •ì„ ì„ íƒí•´ì£¼ì„¸ìš”!");
                        return;
                    }

                    // ë²„íŠ¼ ë¹„í™œì„±í™” ë° ë¡œë”© í‘œì‹œ
                    submitBtn.disabled = true;
                    spinner.classList.remove("hidden");
                    buttonText.textContent = "ì œì¶œ ì¤‘...";

                    const formData = new FormData(e.target);
                    const payload = {
                        emotion: formData.get("emotion"),
                        q1: formData.get("q1"),
                        q2: formData.get("q2"),
                        q3: formData.get("q3"),
                        q4: formData.get("q4"),
                        q5: formData.get("q5"),
                        q6: formData.get("q6"),
                        q7: formData.get("q7"),
                    };

                    try {
                        const response = await fetch(
                            "https://script.google.com/macros/s/AKfycbw0qiwQJqXZmsftZW0l17BtEjkJmLnTCRwKjlt7JqGsqJBGsw13nJbX_lc9XQHYim_O6Q/exec",
                            {
                                method: "POST",
                                mode: "no-cors",
                                headers: {
                                    "Content-Type": "text/plain",
                                },
                                body: JSON.stringify(payload),
                            }
                        );

                        // í¼ ì´ˆê¸°í™”
                        e.target.reset();
                        document
                            .querySelectorAll(".emotion-btn")
                            .forEach((btn) => btn.classList.remove("selected"));
                        document.getElementById("selected-emotion").value = "";

                        // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
                        document
                            .getElementById("success-msg")
                            .classList.remove("hidden");

                        // ì¹´ìš´í„° ì¦ê°€
                        const countEl =
                            document.getElementById("feedback-count");
                        countEl.textContent = parseInt(countEl.textContent) + 1;

                        // 5ì´ˆ í›„ ì„±ê³µ ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°
                        setTimeout(() => {
                            document
                                .getElementById("success-msg")
                                .classList.add("hidden");
                        }, 5000);
                    } catch (error) {
                        alert("ì œì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                    } finally {
                        // ë²„íŠ¼ ìƒíƒœ ë³µêµ¬
                        submitBtn.disabled = false;
                        spinner.classList.add("hidden");
                        buttonText.textContent = "ì œì¶œí•˜ê¸°";
                    }
                });
        </script>
    </body>
</html>
