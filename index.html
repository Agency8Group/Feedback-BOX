<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Feedback Box</title>
        <link
            href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
            rel="stylesheet"
        />
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
            rel="stylesheet"
        />
        <style>
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            .fade-in {
                animation: fadeIn 0.5s ease-out;
            }
            .transition-all {
                transition: all 0.3s ease;
            }
        </style>
    </head>
    <body class="bg-gray-50 min-h-screen">
        <div class="container mx-auto px-4 py-8 max-w-4xl">
            <!-- 헤더 섹션 -->
            <header class="text-center mb-12 fade-in">
                <h1 class="text-4xl font-bold text-gray-800 mb-4">
                    <i class="fas fa-comments text-blue-600 mr-2"></i>
                    Feedback Box
                </h1>
                <p class="text-lg text-gray-600">
                    조직 개선을 위한 익명 피드백 수집 플랫폼입니다.
                </p>
            </header>

            <!-- 설명 섹션 -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-8 fade-in">
                <div class="flex items-center justify-center space-x-4">
                    <i class="fas fa-shield-alt text-3xl text-blue-600"></i>
                    <div>
                        <h2 class="text-xl font-semibold text-gray-800 mb-2">
                            안전한 익명 피드백
                        </h2>
                        <p class="text-gray-600">
                            모든 응답은 익명이며 전략기획실에서만 열람합니다.
                        </p>
                    </div>
                </div>
            </div>

            <!-- 랜덤 메시지 -->
            <div
                id="random-message"
                class="text-center text-gray-600 italic mb-8 fade-in"
            ></div>

            <!-- 피드백 폼 -->
            <form id="feedback-form" class="space-y-6">
                <!-- 감정바 -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-8 fade-in">
                    <label class="block text-gray-700 mb-4"
                        >전반적인 느낌을 선택해주세요</label
                    >
                    <div class="flex justify-between text-3xl">
                        <button
                            type="button"
                            class="emotion-btn hover:transform hover:scale-110 transition-all"
                            data-emotion="angry"
                        >
                            😡
                        </button>
                        <button
                            type="button"
                            class="emotion-btn hover:transform hover:scale-110 transition-all"
                            data-emotion="neutral"
                        >
                            😐
                        </button>
                        <button
                            type="button"
                            class="emotion-btn hover:transform hover:scale-110 transition-all"
                            data-emotion="happy"
                        >
                            🙂
                        </button>
                        <button
                            type="button"
                            class="emotion-btn hover:transform hover:scale-110 transition-all"
                            data-emotion="love"
                        >
                            😍
                        </button>
                    </div>
                    <input type="hidden" name="emotion" id="selected-emotion" />
                </div>

                <!-- 질문 카드들 -->
                <div class="space-y-6">
                    <div
                        class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all"
                    >
                        <label class="block text-gray-700 font-medium mb-3"
                            >요즘 누구랑 자주 일하세요?</label
                        >
                        <input
                            name="q1"
                            type="text"
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            required
                        />
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all"
                    >
                        <label class="block text-gray-700 font-medium mb-3"
                            >회사에 바라는 점은?</label
                        >
                        <textarea
                            name="q2"
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            rows="3"
                            required
                        ></textarea>
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all"
                    >
                        <label class="block text-gray-700 font-medium mb-3"
                            >한 가지 바꿀 수 있다면?</label
                        >
                        <textarea
                            name="q3"
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            rows="2"
                        ></textarea>
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all"
                    >
                        <label class="block text-gray-700 font-medium mb-3"
                            >한 단어로 우리 회사를 표현한다면?</label
                        >
                        <input
                            name="q4"
                            type="text"
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all"
                    >
                        <label class="block text-gray-700 font-medium mb-3"
                            >최근 좋았던 회사 경험은?</label
                        >
                        <textarea
                            name="q5"
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            rows="3"
                        ></textarea>
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all"
                    >
                        <label class="block text-gray-700 font-medium mb-3"
                            >개선을 위한 제안이 있다면 적어주세요</label
                        >
                        <textarea
                            name="q6"
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            rows="4"
                        ></textarea>
                    </div>

                    <div
                        class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all"
                    >
                        <label class="block text-gray-700 font-medium mb-3"
                            >함께 일하고 싶은 사람의 특성은?</label
                        >
                        <textarea
                            name="q7"
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            rows="2"
                        ></textarea>
                    </div>
                </div>

                <!-- 제출 버튼 -->
                <div class="text-center">
                    <button
                        type="submit"
                        class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transform hover:scale-105 transition-all font-medium"
                    >
                        <i class="fas fa-paper-plane mr-2"></i>제출하기
                    </button>
                </div>
            </form>

            <!-- 성공 메시지 -->
            <div
                id="success-msg"
                class="hidden mt-8 bg-green-100 text-green-700 p-4 rounded-lg text-center font-medium fade-in"
            >
                <i class="fas fa-check-circle mr-2"></i>피드백이 제출되었습니다.
                감사합니다!
            </div>

            <!-- 피드백 카운터 -->
            <div class="mt-12 text-center text-gray-600">
                <p>
                    지금까지
                    <span id="feedback-count" class="font-bold text-blue-600"
                        >0</span
                    >개의 피드백이 모였습니다
                </p>
            </div>

            <!-- 푸터 -->
            <footer class="mt-16 text-center text-gray-500 text-sm">
                <p>© 2025 전략기획실</p>
                <p class="mt-2">
                    문의:
                    <a
                        href="mailto:feedback@company.com"
                        class="text-blue-600 hover:underline"
                        >feedback@company.com</a
                    >
                </p>
            </footer>
        </div>

        <script>
            // 랜덤 메시지 표시
            const messages = [
                "솔직하게 써주세요, 이름은 몰라요 😎",
                "여러분의 의견이 회사를 변화시킵니다 💪",
                "더 나은 조직을 만들어가요 🌱",
                "모든 의견은 소중합니다 ✨",
            ];

            document.getElementById("random-message").textContent =
                messages[Math.floor(Math.random() * messages.length)];

            // 감정 선택 처리
            document.querySelectorAll(".emotion-btn").forEach((btn) => {
                btn.addEventListener("click", function () {
                    document
                        .querySelectorAll(".emotion-btn")
                        .forEach((b) =>
                            b.classList.remove("scale-125", "shadow-lg")
                        );
                    this.classList.add("scale-125", "shadow-lg");
                    document.getElementById("selected-emotion").value =
                        this.dataset.emotion;
                });
            });

            // 폼 제출 처리
            document
                .getElementById("feedback-form")
                .addEventListener("submit", async function (e) {
                    e.preventDefault();

                    const formData = new FormData(e.target);
                    const payload = {
                        emotion: formData.get("emotion"),
                        q1: formData.get("q1"),
                        q2: formData.get("q2"),
                        q3: formData.get("q3"),
                        q4: formData.get("q4"),
                        q5: formData.get("q5"),
                        q6: formData.get("q6"),
                        q7: formData.get("q7"),
                    };

                    try {
                        await fetch(
                            "https://script.google.com/macros/s/AKfycbxpriLGLKMJRqlHXBZcb14hTJJnQ2joc3ukRx-MocQhrJyV1iyQHhZGWz9dX7ibXxPuTQ/exec",
                            {
                                method: "POST",
                                mode: "no-cors",
                                headers: {
                                    "Content-Type": "application/json",
                                },
                                body: JSON.stringify(payload),
                            }
                        );

                        document.getElementById("feedback-form").reset();
                        document
                            .getElementById("success-msg")
                            .classList.remove("hidden");

                        // 감정 선택 초기화
                        document
                            .querySelectorAll(".emotion-btn")
                            .forEach((btn) =>
                                btn.classList.remove("scale-125", "shadow-lg")
                            );

                        // 카운터 증가
                        const countEl =
                            document.getElementById("feedback-count");
                        countEl.textContent = parseInt(countEl.textContent) + 1;

                        // 5초 후 성공 메시지 숨기기
                        setTimeout(() => {
                            document
                                .getElementById("success-msg")
                                .classList.add("hidden");
                        }, 5000);
                    } catch (error) {
                        alert("제출에 실패했습니다. 다시 시도해주세요.");
                    }
                });
        </script>
    </body>
</html>
